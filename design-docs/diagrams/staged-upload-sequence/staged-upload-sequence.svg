<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="490px" preserveAspectRatio="none" style="width:727px;height:490px;background:#FFFFFF;" version="1.1" viewBox="0 0 727 490" width="727px" zoomAndPan="magnify"><defs><filter height="300%" id="flev1gbghiatb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="72.8906" y2="414.6172"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="319" x2="319" y1="72.8906" y2="414.6172"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="472" x2="472" y1="72.8906" y2="414.6172"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="534" x2="534" y1="72.8906" y2="414.6172"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="649" x2="649" y1="72.8906" y2="414.6172"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="697" x2="697" y1="72.8906" y2="414.6172"/><rect fill="#FEFECE" filter="url(#flev1gbghiatb)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="114" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="41" y="24.9951">Image</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="12" y="41.292">Categorization</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="42.5" y="57.5889">Client</text><rect fill="#FEFECE" filter="url(#flev1gbghiatb)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="114" x="5" y="413.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="41" y="433.6123">Image</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="12" y="449.9092">Categorization</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="42.5" y="466.2061">Client</text><rect fill="#FEFECE" filter="url(#flev1gbghiatb)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="114" x="260" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="296" y="24.9951">Image</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="267" y="41.292">Categorization</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="297.5" y="57.5889">Client</text><rect fill="#FEFECE" filter="url(#flev1gbghiatb)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="114" x="260" y="413.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="296" y="433.6123">Image</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="267" y="449.9092">Categorization</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="297.5" y="466.2061">Client</text><rect fill="#FEFECE" filter="url(#flev1gbghiatb)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="64" x="438" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17" x="461.5" y="24.9951">s3</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="452" y="41.292">Hook</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="445" y="57.5889">lambda</text><rect fill="#FEFECE" filter="url(#flev1gbghiatb)" height="62.8906" style="stroke:#A80036;stroke-width:1.5;" width="64" x="438" y="413.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17" x="461.5" y="433.6123">s3</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="452" y="449.9092">Hook</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="445" y="466.2061">lambda</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="516" y="69.5889">RDS</text><path d="M516,20.5938 C516,10.5938 534,10.5938 534,10.5938 C534,10.5938 552,10.5938 552,20.5938 L552,46.5938 C552,56.5938 534,56.5938 534,56.5938 C534,56.5938 516,56.5938 516,46.5938 L516,20.5938 " fill="#FEFECE" filter="url(#flev1gbghiatb)" style="stroke:#000000;stroke-width:1.5;"/><path d="M516,20.5938 C516,30.5938 534,30.5938 534,30.5938 C534,30.5938 552,30.5938 552,20.5938 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="516" y="426.6123">RDS</text><path d="M516,439.9141 C516,429.9141 534,429.9141 534,429.9141 C534,429.9141 552,429.9141 552,439.9141 L552,465.9141 C552,475.9141 534,475.9141 534,475.9141 C534,475.9141 516,475.9141 516,465.9141 L516,439.9141 " fill="#FEFECE" filter="url(#flev1gbghiatb)" style="stroke:#000000;stroke-width:1.5;"/><path d="M516,439.9141 C516,449.9141 534,449.9141 534,449.9141 C534,449.9141 552,449.9141 552,439.9141 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17" x="637.5" y="69.5889">s3</text><path d="M631,20.5938 C631,10.5938 649,10.5938 649,10.5938 C649,10.5938 667,10.5938 667,20.5938 L667,46.5938 C667,56.5938 649,56.5938 649,56.5938 C649,56.5938 631,56.5938 631,46.5938 L631,20.5938 " fill="#FEFECE" filter="url(#flev1gbghiatb)" style="stroke:#000000;stroke-width:1.5;"/><path d="M631,20.5938 C631,30.5938 649,30.5938 649,30.5938 C649,30.5938 667,30.5938 667,20.5938 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17" x="637.5" y="426.6123">s3</text><path d="M631,439.9141 C631,429.9141 649,429.9141 649,429.9141 C649,429.9141 667,429.9141 667,439.9141 L667,465.9141 C667,475.9141 649,475.9141 649,475.9141 C649,475.9141 631,475.9141 631,465.9141 L631,439.9141 " fill="#FEFECE" filter="url(#flev1gbghiatb)" style="stroke:#000000;stroke-width:1.5;"/><path d="M631,439.9141 C631,449.9141 649,449.9141 649,449.9141 C649,449.9141 667,449.9141 667,439.9141 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#flev1gbghiatb)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="36" x="677" y="37.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="684" y="57.5889">rds</text><rect fill="#FEFECE" filter="url(#flev1gbghiatb)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="36" x="677" y="413.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="684" y="433.6123">rds</text><polygon fill="#A80036" points="307,100.0234,317,104.0234,307,108.0234,311,104.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64" x2="313" y1="104.0234" y2="104.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="71" y="98.9575">Metadata including name, size, tags</text><polygon fill="#A80036" points="522,144.2891,532,148.2891,522,152.2891,526,148.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="528" y1="148.2891" y2="148.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="326" y="128.0903">Creates record for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="326" y="143.2231">image and tags</text><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="361" y1="192.5547" y2="192.5547"/><line style="stroke:#A80036;stroke-width:1.0;" x1="361" x2="361" y1="192.5547" y2="205.5547"/><line style="stroke:#A80036;stroke-width:1.0;" x1="320" x2="361" y1="205.5547" y2="205.5547"/><polygon fill="#A80036" points="330,201.5547,320,205.5547,330,209.5547,326,205.5547" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="326" y="172.356">Generates pre-signed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="326" y="187.4888">upload url</text><polygon fill="#A80036" points="75,230.6875,65,234.6875,75,238.6875,71,234.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69" x2="318" y1="234.6875" y2="234.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="81" y="229.6216">Returns ID + upload_url</text><polygon fill="#A80036" points="637,259.8203,647,263.8203,637,267.8203,641,263.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64" x2="643" y1="263.8203" y2="263.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="71" y="258.7544">PUTs image to upload_url</text><polygon fill="#A80036" points="483,288.9531,473,292.9531,483,296.9531,479,292.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="477" x2="648" y1="292.9531" y2="292.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="489" y="287.8872">notifies image uploaded</text><polygon fill="#A80036" points="637,348.3516,647,352.3516,637,356.3516,641,352.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="472" x2="643" y1="352.3516" y2="352.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="479" y="317.02">inspects upload</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="479" y="332.1528">moves to permanent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="479" y="347.2856">location</text><polygon fill="#A80036" points="685,392.6172,695,396.6172,685,400.6172,689,396.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="472" x2="691" y1="396.6172" y2="396.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="479" y="376.4185">marks image upload time</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="479" y="391.5513">and permanent key</text><!--MD5=[64c6e22bc93ebdd6a0418d992da06293]
@startuml

participant "Image\nCategorization\nClient" as client
participant "Image\nCategorization\nClient" as post_handler
participant "s3\nHook\nlambda" as s3_hook
database "RDS" as db
database "s3" as s3

client -> post_handler: Metadata including name, size, tags
post_handler -> db: Creates record for\nimage and tags
post_handler -> post_handler: Generates pre-signed\nupload url
post_handler -> client: Returns ID + upload_url
client -> s3: PUTs image to upload_url
s3 -> s3_hook: notifies image uploaded
s3_hook -> s3: inspects upload\nmoves to permanent\nlocation
s3_hook -> rds: marks image upload time\nand permanent key


@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>